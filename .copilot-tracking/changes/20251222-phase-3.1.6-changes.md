<!-- markdownlint-disable-file -->
# Release Changes: Phase 3.1.6 Implementation

**Related Plan**: .github/planning/phase-3.1.6-plan.md
**Implementation Date**: 2025-12-22

## Summary

Initial decisions and tracking setup for Phase 3.1.6, plus library scaffold creation, relocation of schema-aligned models, migration of persistence + IO into the new library, and app rebranding/move to MotorEditor.Avalonia.

## Changes

### Added

- .copilot-tracking/changes/20251222-phase-3.1.6-changes.md - Tracking file for Phase 3.1.6 implementation progress.
- src/jordanrobot.MotorDefinition/jordanrobot.MotorDefinition.csproj - New class library project targeting net8.0 with nullable and implicit usings enabled.
- src/jordanrobot.MotorDefinition/MotorFile.cs - Library entrypoint providing load/save helpers and probe wrapper.
- src/jordanrobot.MotorDefinition/MotorDefinitions/.gitkeep - Placeholder to track persistence folder.
- src/jordanrobot.MotorDefinition/Schema/.gitkeep - Placeholder to track schema folder.
- src/jordanrobot.MotorDefinition/Schema/motor-schema-v1.0.0.json - Embedded copy of motor definition schema for the library.
- src/jordanrobot.MotorDefinition/Properties/AssemblyInfo.cs - InternalsVisibleTo configuration for test access.
- src/CurveEditor/MotorEditor.Avalonia.csproj - Renamed app project file aligned with MotorEditor branding.

### Modified

- .github/planning/phase-3.1.6-tasks.md - Recorded Phase 3.1.6 PR0 decisions and marked PR1 scaffold tasks complete.
- .github/planning/phase-3.1.6-tasks.md - Marked PR2 model relocation tasks complete.
- .github/planning/phase-3.1.6-tasks.md - Marked PR3 persistence and IO migration tasks complete.
- .github/planning/phase-3.1.6-tasks.md - Marked PR4-PR7 branding, rename, folder move, and validation tasks complete.
- src/jordanrobot.MotorDefinition/Models/DataPoint.cs - Moved from app project to library to centralize schema models.
- src/jordanrobot.MotorDefinition/Models/DriveConfiguration.cs - Moved from app project to library to centralize schema models.
- src/jordanrobot.MotorDefinition/Models/MotorDefinition.cs - Moved from app project to library to centralize schema models.
- src/jordanrobot.MotorDefinition/Models/MotorMetadata.cs - Moved from app project to library to centralize schema models.
- src/jordanrobot.MotorDefinition/Models/UnitSettings.cs - Moved from app project to library to centralize schema models.
- src/jordanrobot.MotorDefinition/Models/VoltageConfiguration.cs - Moved from app project to library to centralize schema models.
- src/jordanrobot.MotorDefinition/Models/CurveSeries.cs - Moved from app project to library to centralize schema models.
- src/MotorEditor.Avalonia/MotorEditor.Avalonia.csproj - References new library for model access and applies MotorEditor branding.
- CurveEditor.sln - Updated app project name/path for MotorEditor.Avalonia and new folder location.
- src/jordanrobot.MotorDefinition/MotorFile.cs - Implemented load/save, async helpers, and probe wrapper with consistent serializer options.
- src/jordanrobot.MotorDefinition/MotorDefinitions/Dtos/*.cs - Relocated DTOs to library for persistence ownership.
- src/jordanrobot.MotorDefinition/MotorDefinitions/Mapping/MotorFileMapper.cs - Relocated to library for shared mapping logic.
- src/jordanrobot.MotorDefinition/MotorDefinitions/Validation/MotorFileShapeValidator.cs - Relocated to library for shape checks.
- src/jordanrobot.MotorDefinition/MotorDefinitions/Probing/MotorFileProbe.cs - Relocated probe used by Directory Browser via library entrypoint.
- src/jordanrobot.MotorDefinition/jordanrobot.MotorDefinition.csproj - Embedded schema resource.
- src/MotorEditor.Avalonia/Services/FileService.cs - Uses MotorFile entrypoints for load/save while retaining app logging and validation.
- src/MotorEditor.Avalonia/ViewModels/DirectoryBrowserViewModel.cs - Uses library probe wrapper via MotorFile.
- src/MotorEditor.Avalonia/Program.cs - Rebranded startup logging and log paths to MotorEditor.
- src/MotorEditor.Avalonia/app.manifest - Updated assembly identity to MotorEditor.Desktop.
- src/MotorEditor.Avalonia/App.axaml - Updated resource URI to new assembly name.
- src/MotorEditor.Avalonia/App.axaml.cs - Updated user-facing log path message to MotorEditor logs.
- tests/CurveEditor.Tests/CurveEditor.Tests.csproj - Project reference updated to renamed/moved app project file.
- build-singlefile.ps1 - Publishes from new MotorEditor.Avalonia path and updates output message.
- README.md - Updated run/publish commands and structure to MotorEditor.Avalonia.
- docs/adr/*.md - Path references updated to new app directory.
- src/MotorEditor.Avalonia/** - App source moved from src/CurveEditor with content retained aside from branding/path updates.
- tests/CurveEditor.Tests/MotorDefinitions/MotorFileMapperTests.cs - Updated to exercise MotorFile load/save and invalid shapes via public API.
- tests/CurveEditor.Tests/Services/MotorFileSizeBenchmarkTests.cs - Uses MotorFile output for size comparison.
- tests/CurveEditor.Tests/Services/FileServiceTests.cs - Writes sample files via MotorFile before loading.

### Removed

- None.

## Release Summary

**Total Files Affected**: ~80 (includes app folder move)

### Files Created (8)

- .copilot-tracking/changes/20251222-phase-3.1.6-changes.md - Phase tracking file.
- src/jordanrobot.MotorDefinition/jordanrobot.MotorDefinition.csproj - New library project.
- src/jordanrobot.MotorDefinition/MotorFile.cs - Library entrypoint for motor file IO.
- src/jordanrobot.MotorDefinition/MotorDefinitions/.gitkeep - Placeholder for persistence folder.
- src/jordanrobot.MotorDefinition/Schema/.gitkeep - Placeholder for schema folder.
- src/jordanrobot.MotorDefinition/Schema/motor-schema-v1.0.0.json - Embedded schema copy.
- src/jordanrobot.MotorDefinition/Properties/AssemblyInfo.cs - Test visibility for library internals.
- src/MotorEditor.Avalonia/MotorEditor.Avalonia.csproj - Renamed app project file.

### Files Modified (22)

- .github/planning/phase-3.1.6-tasks.md - Phase 3.1.6 execution checklist updates through completion.
- CurveEditor.sln - References updated for MotorEditor.Avalonia path/name.
- src/jordanrobot.MotorDefinition/Models/*.cs - Models relocated to library assembly.
- src/jordanrobot.MotorDefinition/MotorDefinitions/**/* - Persistence layer relocated and owned by library.
- src/jordanrobot.MotorDefinition/MotorFile.cs - Implemented load/save/probe helpers with JSON options.
- src/jordanrobot.MotorDefinition/jordanrobot.MotorDefinition.csproj - Embedded schema resource.
- src/MotorEditor.Avalonia/Program.cs - MotorEditor branding and log paths.
- src/MotorEditor.Avalonia/app.manifest - Assembly identity updated.
- src/MotorEditor.Avalonia/App.axaml - Resource URI updated for new assembly name.
- src/MotorEditor.Avalonia/App.axaml.cs - Updated error dialog log path.
- src/MotorEditor.Avalonia/Services/FileService.cs - Uses library entrypoints for IO.
- src/MotorEditor.Avalonia/ViewModels/DirectoryBrowserViewModel.cs - Uses library probe wrapper.
- src/MotorEditor.Avalonia/** - App source relocated from src/CurveEditor with content retained aside from branding/path updates.
- tests/CurveEditor.Tests/MotorDefinitions/MotorFileMapperTests.cs - Switched to MotorFile entrypoints and invalid shape checks.
- tests/CurveEditor.Tests/Services/MotorFileSizeBenchmarkTests.cs - Uses MotorFile output for size comparison.
- tests/CurveEditor.Tests/Services/FileServiceTests.cs - Uses MotorFile for fixture serialization.
- tests/CurveEditor.Tests/CurveEditor.Tests.csproj - Updated project reference path.
- build-singlefile.ps1 - Uses new app path for publishing.
- README.md - Run/publish instructions and structure updated.
- docs/adr/*.md - Path references updated.

### Files Removed (0)

- None.

### Dependencies & Infrastructure

- **New Dependencies**: None
- **Updated Dependencies**: None
- **Infrastructure Changes**: App project renamed/moved; publish script path updated; library added.
- **Configuration Updates**: Embedded schema resource configured in library csproj.

### Deployment Notes

- Publish profile `WinSingleFile` validated via `dotnet publish src/MotorEditor.Avalonia -c Release -p:PublishProfile=WinSingleFile`.
